# Thesis# Εξαγωγή & Κατηγοριοποίηση Νομικών Ορισμών από ΦΕΚ (Διπλωματική Εργασία)

Αποθετήριο που συγκεντρώνει τα scripts και τη ροή εργασίας για:
1) **εξαγωγή νομικών ορισμών** από κείμενα ΦΕΚ (βάση Harvester),
2) **αποθήκευση** των ορισμών σε ξεχωριστή SQLite βάση,
3) **βαθμολόγηση/εκτίμηση αξιοπιστίας (confidence scoring)** των εξαγόμενων ορισμών,
4) **θεματική κατηγοριοποίηση** κάθε ορισμού με χρήση του εργαλείου **Kevlar** (API).

Το έργο υλοποιείται στο πλαίσιο της διπλωματικής μου εργασίας:  
**«Επισήμανση Νομικών Ορισμών στην Ελληνική Νομοθεσία με χρήση Συμβολικής Τεχνητής Νοημοσύνης»**.

---

## Δομή δεδομένων & Βάσεις SQLite

### 1) Harvester DB (Πηγή)
Η βάση **Harvester** (π.χ. `harvester.db`) περιέχει τα κείμενα των ΦΕΚ/νομικών κειμένων.

Βασικός πίνακας:
- `et` (ενδεικτικά πεδία που χρησιμοποιούνται)
  - `ID` (fekID / πρωτεύον κλειδί)
  - `fekNumber`
  - `fekEtos`
  - `nomosNum`
  - `nomosTitle` (όπου υπάρχει)
  - `fekTEXT` (πλήρες κείμενο)

> Η Harvester DB θεωρείται **μόνο πηγή**. Τα αποτελέσματα εξαγωγής αποθηκεύονται σε ξεχωριστή βάση.

---

### 2) Βάση Ορισμών (Αποτελέσματα)
Η βάση ορισμών (π.χ. `orismoi_*.db`) περιέχει τους εξαγόμενους ορισμούς στον πίνακα:

#### `definitions`
- `ID` (PRIMARY KEY)
- `term` (ο όρος)
- `explanation` (η επεξήγηση/ορισμός)
- `fekID` (σύνδεση με `et.ID`)
- `fekNumber`, `fekEtos`, `nomosNum`
- `fekText` (προαιρετική αποθήκευση πλήρους κειμένου, αν χρησιμοποιείται)
- `excerpt` (απόσπασμα συμφραζομένων)
- `offset_start`, `offset_end` (θέση στο κείμενο)
- `bullet` (αρίθμηση/γράμμα όταν υπάρχει)
- `pattern_tag` (κανόνας/μοτίβο που “έπιασε” τον ορισμό)

---

## Εξαγωγή Ορισμών (Extraction)

Η εξαγωγή βασίζεται σε **κανόνες (regex) και μοτίβα** που εμφανίζονται συχνά σε άρθρα τύπου “Ορισμοί”, π.χ.:
- αριθμημένες λίστες (`1.`, `2.`, `α)`, `β)`, κ.λπ.)
- εισαγωγικά γύρω από τον όρο (`«...»` / `"..."`)
- ρήματα ορισμού: `ορίζεται`, `νοείται`, `σημαίνει`, `καθορίζεται`, `θεωρείται`
- φράσεις σκοπού: `Για τους σκοπούς ...`

### Στόχος εξαγωγής
Για κάθε εντοπισμένο ορισμό, καταγράφεται:
- ο **όρος** (`term`)
- η **επεξήγηση** (`explanation`)
- τα **μεταδεδομένα προέλευσης** (fekID, offsets, excerpt κ.λπ.)

> Σημείωση: Ένα βασικό πρόβλημα που αντιμετωπίζεται είναι οι “σπασμένοι” ορισμοί (nested bullets), όπου μια επεξήγηση συνεχίζει σε υπο-λίστα (`α)`, `β)` κ.λπ.). Για αυτό η εξαγωγή και η βαθμολόγηση βοηθούν στο φιλτράρισμα/έλεγχο.

---

## Βαθμολόγηση Αξιοπιστίας (Confidence Scoring)

Για να υποστηριχθεί η ποιοτική αξιολόγηση και η μελλοντική βελτίωση των κανόνων, κάθε ορισμός περνά από scoring διαδικασία που παράγει:
- `confidence` (τιμή 0..1)
- flags/χαρακτηριστικά για ανάλυση σφαλμάτων (π.χ. πολύ μεγάλο κείμενο, ύποπτος όρος, περιέχει “Άρθρο”, κ.ά.)
- `needs_review` (αν προτείνεται ανθρώπινος έλεγχος)

Οι βαθμολογίες αποθηκεύονται σε νέο πίνακα ώστε να γίνονται συγκρίσεις μεταξύ εκδόσεων scoring.

### `score` / `score_2`
- `def_id` (FOREIGN KEY -> `definitions.ID`)
- `confidence`
- `needs_review`
- επιπλέον χαρακτηριστικά (ενδεικτικά):
  - `has_quotes`, `has_def_verb`, `has_scope_phrase`
  - `has_nested_bullets`
  - `ends_clean`, `ends_with`
  - `contains_article_header`, `contains_big_header`, `contains_amendment`
  - `term_suspicious`, `expl_empty`, `expl_too_short`, `expl_too_long`
  - `contributions_json` (αναλυτική συνεισφορά κάθε κανόνα/σήματος)

Η ύπαρξη `score_2` επιτρέπει:
- να μην “χαλάμε” τα προηγούμενα αποτελέσματα,
- να συγκρίνουμε βελτιώσεις στη βαθμολόγηση με στατιστικές/SQL queries.

---

## Κατηγοριοποίηση Ορισμών (Classification / Categorization)

Μετά την εξαγωγή, κάθε ορισμός μπορεί να κατηγοριοποιηθεί θεματικά μέσω **Kevlar**.

### Kevlar (Local API)
Το Kevlar μπορεί να τρέξει τοπικά με Docker:
```bash
docker run --rm --name kevlar -p 8080:80 kevlar:latest